dom.define("event","node,dispatcher",function(){function k(a,b,c){c=f.fix(c);c.type=b;f.handle.call(a,c)}var i=this.document;dom.eventSupport=function(a,b){b=b||i.createElement("div");a="on"+a;var c=a in b;if(b.setAttribute&&!c){b.setAttribute(a,"return;");c=typeof b[a]==="function"}return c};var f=dom.event,j=f.special={focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){if(dom.type(a,"Window"))a.onbeforeunload=c},teardown:function(a,b,c){if(a.onbeforeunload===
c)a.onbeforeunload=null}}},o=dom.rword;"mouseenter_mouseover,mouseleave_mouseout".replace(/(\w+)_(\w+)/g,function(a,b,c){j[b]={setup:function(d){dom._data(d,b+"_handle",dom.bind(d,c,function(e){var g=e.relatedTarget;try{for(;g&&g!==d;)g=g.parentNode;g!==d&&k(d,b,e)}catch(l){}}))},teardown:function(){dom.bind(this,c,dom._data(b+"_handle")||dom.noop)}}});var h=function(a){return function(b,c){if(!c)return false;a(b)}},p=dom.oneObject("13,108"),q=dom.oneObject("submit,image"),m=dom.oneObject("text,password,textarea");
if(!i.dispatchEvent){var r=/^(?:textarea|input|select)$/i,s={"select-one":"selectedIndex","select-multiple":"selectedIndex",radio:"checked",checkbox:"checked"},t=function(a){if(a.propertyName===(s[this.type]||"value")){var b=dom._data(this,"publisher");a=f.fix(a);a.type="change";for(var c in b)f.handle.call(b[c],a)}};dom.mix(j,{reset:{setup:h(function(a){f.bind.call(a,"click._reset keypress._reset",function(b){if(b.target.form&&(b.which===27||b.target.type=="reset"))k(a,"reset",b)})}),teardown:h(function(a){f.unbind.call(a,
"._reset")})},submit:{setup:h(function(a){f.bind.call(a,"click._submit keypress._submit",function(b){var c=b.target,d=c.type;if(c.form&&(q[d]||p[b.which]&&m[d]))k(a,"submit",b)})}),teardown:h(function(a){f.unbind.call(a,"._submit")})},change:{setup:h(function(a){var b=dom._data(a,"subscriber",{});dom._data(a,"valuechange_setup",dom.bind(a,"beforeactivate",function(){var c=event.srcElement;if(r.test(c.nodeName)&&!b[c.uniqueNumber]){b[c.uniqueNumber]=c;(dom._data(c,"publisher")||dom._data(c,"publisher",
{}))[a.uniqueNumber]=a;f.bind.call(c,"propertychange._change",t)}}))}),teardown:h(function(a){dom.unbind(a,"beforeactive",dom._data(a,"valuechange_setup")||dom.noop);var b=dom.removeData(a,"subscriber",true)||{},c;for(c in b){dom.unbind(b[c],"._change");var d=dom._data(b[c],"publisher");d&&delete d[a.uniqueNumber]}})}})}if(dom.eventSupport("input",i.createElement("input")))j.change={setup:h(function(a){dom._data(a,"valuechange_setup",dom.bind(a,"input",function(b){k(a,"change",b)},true));dom._data(a,
"selectchange_setup",dom.bind(a,"change",function(b){var c=b.target.type;c&&!m[c]&&f.handle.call(a,b)},true))}),teardown:h(function(a){dom.unbind(a,"input",dom._data(a,"valuechange_setup")||dom.noop);dom.unbind(a,"change",dom._data(a,"selectchange_setup")||dom.noop)})};dom.eventSupport("focusin")||"focusin_focus,focusout_blur".replace(/(\w+)_(\w+)/g,function(a,b,c){var d=0,e=function(g){var l=g.target;do{var n=dom._data(l,"events");n&&n[b]&&k(l,b,g)}while(l=l.parentNode)};j[b]={setup:function(){d++===
0&&i.addEventListener(c,e,true)},teardown:function(){--d===0&&i.removeEventListener(c,e,true)}}});try{i.createEvent("MouseScrollEvents");j.mousewheel={bindType:"DOMMouseScroll",delegateType:"DOMMouseScroll"};try{i.createEvent("WheelEvent");delete j.mousewheel}catch(v){}}catch(w){}var u=/^([\w\-]+)?(?:#([\w\-]+))?(?:\.([\w\-]+))?(?:\[([\w+\-]+)=["']?([\w\-]*)["']?\])?$/;dom.implement({toggle:function(){var a=[].slice.call(arguments),b=0;return this.click(function(c){(a[b++]||a[b=0,b++]).call(this,
c)})},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},on:function(a,b,c,d){if(typeof a==="object"){for(var e in a)this.on(e,a[e],c,d);return this}if(!a||!b)return this;return this.each(function(){f.bind.call(this,a,b,c,d)})},off:function(a,b){if(typeof a==="object"){for(var c in a)this.off(c,a[c],b);return this}var d=arguments;return this.each(function(){f.unbind.apply(this,d)})},one:function(a,b){return this.on(a,b,null,1)},bind:function(a,b,c){return this.on(a,b,c)},unbind:function(a,
b){return this.off(a,b)},live:function(a,b,c){dom(this.ownerDocument).on(a,b,this.selector,c);return this},die:function(a,b){dom(this.ownerDocument).off(a,b,this.selector||"**");return this},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,c,a)},delegate:function(a,b,c,d){if(typeof a==="string"){var e=u.exec(a);if(e){e[1]=(e[1]||"").toLowerCase();e[3]=e[3]&&RegExp("\\b"+e[3]+"\\b")}a=e||a}return this.on(b,c,a,d)},fire:function(){var a=arguments;return this.each(function(){dom.event.fire.apply(this,
a)})}});"contextmenu,click,dblclick,mouseout,mouseover,mouseenter,mouseleave,mousemove,mousedown,mouseup,mousewheel,abort,error,load,unload,resize,scroll,change,input,select,reset,submit,blur,focus,focusin,focusout,keypress,keydown,keyup".replace(o,function(a){dom.fn[a]=function(b){return b?this.bind(a,b):this.fire(a)}})});
