dom.define("ecma",function(){function f(a,c,d){a="for(var "+a+"i=0,n = this.length;i < n;i++){"+c.replace("_","fn.call(scope,this[i],i,this)")+"}"+d;return new Function("fn,scope",a)}var g=dom.DONT_ENUM="propertyIsEnumerable,isPrototypeOf,hasOwnProperty,toLocaleString,toString,valueOf,constructor".split(","),h={}.hasOwnProperty,i;for(i in{toString:1})g=false;dom.mix(Object,{keys:function(a){var c=[],d;for(d in a)h.call(a,d)&&c.push(d);if(g&&a)for(var b=0;d=g[b++];)h.call(a,d)&&c.push(d);return c},
getPrototypeOf:typeof"prototype".__proto__==="object"?function(a){return a.__proto__}:function(a){return a.constructor.prototype}},false);dom.mix(Array.prototype,{indexOf:function(a,c){var d=this.length,b=~~c;if(b<0)b+=d;for(;b<d;b++)if(this[b]===a)return b;return-1},lastIndexOf:function(a,c){var d=this.length,b=c==null?d-1:c;if(b<0)b=Math.max(0,d+b);for(;b>=0;b--)if(this[b]===a)return b;return-1},forEach:f("","_",""),filter:f("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:f("r=[],","r[i]=_","return r"),
some:f("","if(_)return true","return false"),every:f("","if(!_)return false","return true"),reduce:function(a,c,d){if(this.length==0)return c;var b=c!==undefined?0:1;c=c!==undefined?c:this[0];for(var e=this.length;b<e;b++)c=a.call(d,c,this[b],b,this);return c},reduceRight:function(a,c,d){return this.concat().reverse().reduce(a,c,d)}},false);if([].unshift(1)!==1){var j=Array.prototype.unshift;Array.prototype.unshift=function(){j.apply(this,arguments);return this.length}}if(!Array.isArray)Array.isArray=
function(a){return Object.prototype.toString.call(a)=="[object Array]"};dom.mix(String.prototype,{trim:function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}},false);dom.mix(Function.prototype,{bind:function(a){if(arguments.length<2&&a===void 0)return this;var c=this,d=arguments;return function(){var b=[],e;for(e=1;e<d.length;e++)b.push(d[e]);for(e=0;e<arguments.length;e++)b.push(arguments[e]);return c.apply(a,b)}}},false);if((new Date).getYear()>1900){Date.now=function(){return+new Date};
Date.prototype.getYear=function(){return this.getFullYear()-1900};Date.prototype.setYear=function(a){return this.setFullYear(a+1900)}}});
